From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: AlphaKR93 <alphakr93@outlook.com>
Date: Sun, 8 Jan 2023 11:41:16 +0900
Subject: [PATCH] Port PaperMC/Paper#8514


diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
index 525638bbd27f1ac59e59a6c6b2f4bfeaa5cbd7bc..6112cc120e84271624bdf3d35ed94e8f663e74b2 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
@@ -1175,6 +1175,7 @@ public class CraftPlayer extends CraftHumanEntity implements Player {
         targetLocation.setPitch(pitch);
 
         org.bukkit.util.Vector direction = targetLocation.getDirection();
+        if (this.getHandle().getLevel().andromedaLevelConfiguration().paperPullRequestsPort.moveBlockFartherAwayForPlayerSetRotation.enabled) direction.multiply(9999999); // Andromeda - Port PaperMC/Paper#8514
         targetLocation.add(direction);
         this.lookAt(targetLocation, io.papermc.paper.entity.LookAnchor.EYES);
         // Paper end
diff --git a/src/main/java/team/earendel/andromeda/configurations/LevelConfigurations.java b/src/main/java/team/earendel/andromeda/configurations/LevelConfigurations.java
index 9c67548985d5a34c328d0084c7c29149b3221de7..1d3077322ae0434439710dd7c8670da2208fa242 100644
--- a/src/main/java/team/earendel/andromeda/configurations/LevelConfigurations.java
+++ b/src/main/java/team/earendel/andromeda/configurations/LevelConfigurations.java
@@ -201,6 +201,13 @@ public class LevelConfigurations extends ConfigurationPart {
 
         }
 
+        public MoveBlockFartherAwayForPlayerSetRotation moveBlockFartherAwayForPlayerSetRotation;
+        public class MoveBlockFartherAwayForPlayerSetRotation extends ConfigurationPart {
+
+            public boolean enabled = true;
+
+        }
+
     }
 
 }
