From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: AlphaKR93 <alphakr93@outlook.com>
Date: Wed, 11 Jan 2023 20:27:32 +0900
Subject: [PATCH] Move up EULA warning


diff --git a/src/main/java/net/minecraft/server/Main.java b/src/main/java/net/minecraft/server/Main.java
index a75bb4e5bcfc9172ac77022f4d18d62aa9e6b61a..6aaf7897fe1e0440233367f491735b1bbe971199 100644
--- a/src/main/java/net/minecraft/server/Main.java
+++ b/src/main/java/net/minecraft/server/Main.java
@@ -125,6 +125,23 @@ public class Main {
                 JvmProfiler.INSTANCE.start(Environment.SERVER);
             }
 
+            // Andromeda start - Moved up
+            Path path1 = Paths.get("eula.txt");
+            Eula eula = new Eula(path1);
+
+            // Spigot Start
+            if (Boolean.getBoolean( "com.mojang.eula.agree" )) {
+                Main.LOGGER.warn("You have used the Spigot command line EULA agreement flag.");
+                Main.LOGGER.warn("By using this setting you are indicating your agreement to Mojang's EULA (https://www.minecraft.net/en-us/eula).");
+                Main.LOGGER.warn("If you do not agree to the above EULA please stop your server and remove this flag immediately.");
+            } else
+            // Spigot End
+            if (!eula.hasAgreedToEULA()) { // Spigot
+                Main.LOGGER.error("You need to agree to the EULA in order to run the server. Go to eula.txt for more info.");
+                return;
+            }
+            // Andromeda end
+
             Bootstrap.bootStrap();
             Bootstrap.validate();
             Util.startTimerHackThread();
@@ -137,9 +154,6 @@ public class Main {
             org.bukkit.configuration.file.YamlConfiguration spigotConfiguration = io.papermc.paper.configuration.PaperConfigurations.loadLegacyConfigFile((File) optionset.valueOf("spigot-settings"));
             // Paper end
 
-            Path path1 = Paths.get("eula.txt");
-            Eula eula = new Eula(path1);
-
             if (optionset.has("initSettings")) { // CraftBukkit
                 // CraftBukkit start - SPIGOT-5761: Create bukkit.yml and commands.yml if not present
                 File configFile = (File) optionset.valueOf("bukkit-settings");
@@ -158,20 +172,6 @@ public class Main {
                 return;
             }
 
-            // Spigot Start
-            boolean eulaAgreed = Boolean.getBoolean( "com.mojang.eula.agree" );
-            if ( eulaAgreed )
-            {
-                System.err.println( "You have used the Spigot command line EULA agreement flag." );
-                System.err.println( "By using this setting you are indicating your agreement to Mojang's EULA (https://account.mojang.com/documents/minecraft_eula)." );
-                System.err.println( "If you do not agree to the above EULA please stop your server and remove this flag immediately." );
-            }
-            // Spigot End
-            if (!eula.hasAgreedToEULA() && !eulaAgreed) { // Spigot
-                Main.LOGGER.info("You need to agree to the EULA in order to run the server. Go to eula.txt for more info.");
-                return;
-            }
-
             if (!Boolean.getBoolean("Andromeda.UseJavaRandom")) LOGGER.info("Using faster random instance, if you want to use Java's random, add \"-DAndromeda.UseJavaRandom=true\" to your server startup flags, IN FRONT OF the \"-jar\""); // Andromeda
 
             // Paper start - Warn on headless
